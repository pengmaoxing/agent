webpackJsonp([12],{mKez:function(e,t){},"t/75":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("vLgD");a("h2q/");var r=a("+ThO"),i=a("f6oh"),o=a.n(i),l={name:"operaDetail",components:{pagination:r.a},data:function(){return{id:"",activeName:"1",resetPasswordDialog:!1,operaDetail:{},selectName:"请选择分佣模式",editMemberForm:{id:"",name:"",contact:"",province:"",city:"",address:"",payProrata:"",commissionModel:""},disTributeData:[],disTributeDataElements:0,managerData:[],managerDataElements:0,merchantData:[],merchantDataElements:0,tabRefresh:!0,resetPWid:"",resetForm:{password:""},rules:{password:[{required:!0,message:"请输入新的密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},operatorName:"",topName:this.globalAlias.topName,agentName:this.globalAlias.agentName,disName:this.globalAlias.disName,subName:this.globalAlias.subName,Rules:{name:[{required:!0,message:"请输入公司名/个人名",trigger:"blur"},{min:2,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人名字",trigger:"blur"},{min:2,max:12,message:"长度在 2 到 12 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号码",trigger:"blur"}],level:[{required:!0,message:"请选择合作级别",trigger:"blur"}],province:[{required:!0,message:"请选择省份",trigger:"blur"}],city:[{required:!0,message:"请选择城市/县",trigger:"blur"}],address:[{required:!0,message:"请输入具体的地址",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],payProrata:[{required:!0,message:"请输入分佣比例",trigger:"blur"}]},formLabelWidth:"150px",newFormLabelWidth:"130px",currentDisabled:"",dataProv:o.a.selectProv,dataCity:"",commissionOption:[],modifyDynamicForm:[]}},created:function(){},mounted:function(){this.getCommissionModel(),this.id=this.$route.query.mes.id,this.getDetail(this.id),this.getMerchantList(1,10),this.editMemberOpen(this.$route.query.mes)},methods:{getCommissionModel:function(){var e=this;Object(s.a)({url:"/config/admin/config_enum/CommissionModel",method:"get",params:{}}).then(function(t){var a=t.obj;e.commissionOption=a}).catch(function(e){})},goBack:function(){this.$router.go("-1")},changeTabs:function(e,t){var a=this;this.tabRefresh=!1,this.$nextTick(function(){a.tabRefresh=!0}),"1"==e.name?this.getMerchantList(1,10):"2"==e.name&&this.findUsersByCompanyId(1,10)},getDetail:function(e){var t=this;(function(e){return Object(s.a)({url:"/auth/company/promote/detail",method:"get",params:{id:e}})})(e).then(function(e){t.operaDetail=e.obj}).catch(function(e){t.loading=!1})},editMemberOpen:function(e){var t=this;this.editMember=!0,this.currentDisabled=e.status,Object(s.a)({url:"/config/admin/find_commission_model",method:"get",params:{}}).then(function(a){a.obj;t.editMemberForm.commissionModel=e.commissionModel+"",t.editMemberForm.id=e.id,t.editMemberForm.name=e.name,t.editMemberForm.contact=e.contact,t.editMemberForm.cooperationLev=e.cooperationLev,t.editMemberForm.province=e.province,t.editMemberForm.cooperationLev=e.cooperationLev,t.editMemberForm.province=e.province,t.editMemberForm.city=e.city,t.editMemberForm.address=e.address,t.getPayComposeByModify(e.basePriceFeeRateList),t.editMemberForm.payProrata=100*e.payProrata}).catch(function(e){})},getPayComposeByModify:function(e){var t=this;Object(s.a)({url:"/pay/pay_compose/find_config_by_pay_way",method:"get",params:{}}).then(function(a){var s=a.obj;t.modifyDynamicForm=s,t.feeBackShow(s,e)}).catch(function(e){})},feeBackShow:function(e,t){if(0!=t.length){for(var a in t)for(var s in e)for(var r in e[s].selectItemList)t[a].payWay==e[s].selectItem.value&&t[a].payChannel==e[s].selectItemList[r].value&&(e[s].selectItemList[r].companyId=t[a].companyId,e[s].selectItemList[r].feeRate=t[a].feeRate?100*t[a].feeRate:0);for(var i in e)for(var o in e[i].selectItemList){var l=e[i].selectItemList[o].feeRate;""!==l&&NaN!=l&&void 0!==l&&"null"!==l||(e[i].selectItemList[o].feeRate=0)}}else for(var n in e)for(var m in e[n].selectItemList)this.$set(e[n].selectItemList[m],"feeRate",0);this.modifyDynamicForm=this.deepCopy(e)},getMerchantList:function(e,t){var a=this;(function(e,t,a){return Object(s.a)({url:"/merchant/merchant/list",method:"get",params:{pageNumber:e,pageSize:t,companyId:a}})})(e,t,this.id).then(function(e){var t=e.obj;a.merchantData=t.content,a.merchantDataElements=t.totalElements,setTimeout(function(){a.loading=!1},500)}).catch(function(e){a.loading=!1})},findUsersByCompanyId:function(e,t){var a=this;(function(e,t,a){return Object(s.a)({url:"/auth/user/list",method:"get",params:{pageNumber:e,pageSize:t,companyId:a}})})(e,t,this.id).then(function(e){var t=e.obj;a.managerData=t.content,a.managerDataElements=t.totalElements,setTimeout(function(){a.loading=!1},500)}).catch(function(e){a.loading=!1})},resetPasswordDialogOpen:function(e){this.resetPWid=e.id,this.resetPasswordDialog=!0},resetPasswordDialogClose:function(){this.resetForm.password="",this.resetPasswordDialog=!1},saveNewPssword:function(){var e=this;resetPassword(this.resetPWid,this.resetForm.password).then(function(t){e.$message({message:t.msg,type:"success"}),e.resetForm.password="",e.resetPasswordDialog=!1}).catch(function(){e.loading=!1})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"card_box"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"name_title"},[e._v(e._s(e.operaDetail.name))]),e._v(" "),a("el-button",{staticStyle:{float:"right","font-size":"16px"},attrs:{type:"text"},on:{click:e.goBack}},[a("i",{staticClass:"el-icon-back"}),e._v(" 返回列表\n        ")])],1),e._v(" "),a("div",[a("table",{staticClass:"info_table",attrs:{width:"100%"}},[a("tbody",[a("tr",[a("td",{staticClass:"tb_title"},[e._v("联系人")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.contact))]),e._v(" "),a("td",{staticClass:"tb_title"},[e._v("联系电话")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.phone))])]),e._v(" "),a("tr",[a("td",{staticClass:"tb_title"},[e._v("公司")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.name))]),e._v(" "),a("td",{staticClass:"tb_title"},[e._v("归属业务员")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.saleName))]),e._v(" "),a("td",{staticClass:"tb_title"},[e._v("创建时间")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.createTime))])]),e._v(" "),a("tr",[a("td",{staticClass:"tb_title"},[e._v("状态")]),e._v(" "),a("td",{staticClass:"tb_text"},[[1==e.operaDetail.status?[e._v("未启用")]:2===e.operaDetail.status?[e._v("待审核")]:3===e.operaDetail.status?[e._v("已签约")]:4===e.operaDetail.status?[e._v("过期")]:5===e.operaDetail.status?[e._v("注销")]:6===e.operaDetail.status?[e._v("驳回")]:e._e()]],2),e._v(" "),a("td",{staticClass:"tb_title"},[e._v("联系地址")]),e._v(" "),a("td",{staticClass:"tb_text"},[e._v(e._s(e.operaDetail.province)+e._s(e.operaDetail.city)+e._s(e.operaDetail.address))])])])])])]),e._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("div",[a("el-tabs",{on:{"tab-click":e.changeTabs},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"佣金",name:"1"}},[a("el-form",{ref:"editMemberForm",attrs:{model:e.editMemberForm,rules:e.Rules,"label-width":e.newFormLabelWidth,size:"mini"}},[a("el-form-item",{attrs:{label:"当前分佣模式：",prop:"commissionModel"}},[a("el-select",{attrs:{disabled:!0,placeholder:"当前分佣模式"},model:{value:e.editMemberForm.commissionModel,callback:function(t){e.$set(e.editMemberForm,"commissionModel",t)},expression:"editMemberForm.commissionModel"}},e._l(e.commissionOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editMemberForm.commissionModel,expression:"editMemberForm.commissionModel==1"}],attrs:{label:"抽佣比例:","show-message":"",prop:"payProrata"}},[a("el-input-number",{attrs:{precision:2,min:0,max:100,step:.01,disabled:!0},model:{value:e.editMemberForm.payProrata,callback:function(t){e.$set(e.editMemberForm,"payProrata",t)},expression:"editMemberForm.payProrata"}}),e._v("%\n                "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.disName+"的分佣比例，比如填写60%，则佣金分成60%给"+e.disName,placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.editMemberForm.commissionModel,expression:"editMemberForm.commissionModel==2"}],staticClass:"dymForm",attrs:{label:"通道底价:","show-message":""}},[a("br"),e._v(" "),e._l(e.modifyDynamicForm,function(t,s){return a("div",{key:s,staticClass:"box"},e._l(t.selectItemList,function(s,r){return a("div",{key:r},[a("el-form-item",{attrs:{label:t.selectItem.name+"("+s.name+")","label-width":"160px"}},[a("el-input-number",{staticClass:"dymInput",attrs:{precision:2,step:.01,min:0,max:50,disabled:!0},model:{value:s.feeRate,callback:function(t){e.$set(s,"feeRate",t)},expression:"item.feeRate"}}),e._v("%\n                    ")],1)],1)}),0)})],2)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"业务员列表",name:"2"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.managerData,"empty-text":"未查询到数据"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.sex?[e._v("男")]:2===t.row.sex?[e._v("女")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"电子邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:e.subName}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?[e._v("启用")]:2===t.row.status?[e._v("禁用")]:[e._v("驳回")]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.resetPasswordDialogOpen(t.row)}}},[e._v("重置密码")])]}}])})],1),e._v(" "),e.tabRefresh?a("pagination",{ref:"page",attrs:{"total-elements":e.managerDataElements,"change-callback":e.findUsersByCompanyId}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商户列表",name:"3"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.merchantData,"empty-text":"未查询到数据"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"经营类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.businessLevOne)+"-"+e._s(t.row.businessLevTwo)+"-"+e._s(t.row.businessLevThree))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"managerName",label:"所属业务员"}})],1),e._v(" "),e.tabRefresh?a("pagination",{ref:"page",attrs:{"total-elements":e.merchantDataElements,"change-callback":e.getMerchantList}}):e._e()],1)],1)],1)]),e._v(" "),a("el-dialog",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"close-on-click-modal":!1,title:"重置业务员密码",visible:e.resetPasswordDialog,width:"576px","before-close":e.resetPasswordDialogClose},on:{"update:visible":function(t){e.resetPasswordDialog=t}}},[a("el-form",{ref:"resetForm",attrs:{model:e.resetForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.resetForm.password,callback:function(t){e.$set(e.resetForm,"password",t)},expression:"resetForm.password"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetPasswordDialogClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveNewPssword}},[e._v("提 交")])],1)],1)],1)])},staticRenderFns:[]};var m=a("C7Lr")(l,n,!1,function(e){a("mKez")},"data-v-3c87d40e",null);t.default=m.exports}});
//# sourceMappingURL=12.25e2031383e03b165ea0.js.map