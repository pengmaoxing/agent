webpackJsonp([11],{DwX8:function(e,t){},NG8W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("f6oh"),i=a.n(r),o=a("vLgD"),s=a("h2q/"),n=a.n(s);var l={name:"reg",mixins:[a("UVI5").a],data:function(){return{labelPosition:"right",fullWidth:document.documentElement.clientWidth,loading:!0,saveBtnName:"注 册",mid:"",mname:"",addOperatorForm:{name:"",contact:"",phone:"",province:"",city:"",address:"",userId:"",agentLevel:""},operatorFormRules:{name:[{required:!0,message:"请输入公司/个人名称",trigger:"blur"},{min:1,max:28,message:"长度在 1 到 28 个字符",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人真实姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"},{min:5,max:50,message:"长度在 5 到 50 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{validator:function(e,t,a){/^(1\d{10})$/.test(t)?a():a(new Error("手机号码格式错误"))},trigger:"blur"}],province:[{required:!0,message:"请选择省份",trigger:"change"}],city:[{required:!0,message:"请选择城市",trigger:"change"}],agentLevel:[{required:!0,message:"请选择代理级别",trigger:"change"}]},save_checked:!1,saveBtnLoading:!1,checkOK:!1,superior:"凌云商户",currentLevel:0,levelOption:[],cityDetail:"",dataProv:i.a.selectProv,dataCity:"",dataCountry:"",provIndex:"",cityIndex:"",dialogForm:{name:"",selectProv:"",selectCity:"",selectCountry:"",mark:""},selectItems:[]}},created:function(){window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},computed:{},watch:{save_checked:function(e){0==e&&(this.checkOK=!1)}},mounted:function(){this.getAgentLevel(),this.getInfo()},methods:{getInfo:function(){this.mid=this.$route.query.cid||null,this.addOperatorForm.userId=this.$route.query.cid||null,this.mname=this.$route.query.cname||null,""===this.mid||""===this.mname?(this.$message.info("邀请信息错误，无法继续。"),this.loading=tr):this.loading=!1},getAgentLevel:function(){var e=this;Object(o.a)({url:"/config/admin/find_agent_level_alias",method:"get",params:{}}).then(function(t){var a=t.obj;e.levelOption=a}).catch(function(e){})},saveOperatorBefore:function(){var e=this;this.save_checked?this.$refs.addOperatorForm.validate(function(t){if(!t)return e.$message.error("还有未填写的内容"),!1;e.saveOpa()}):this.$message("请确认填写无误。")},saveOpa:function(){var e,t=this,a=this.deepCopy(this.addOperatorForm);this.saveBtnLoading=!0,(e=a,Object(o.a)({url:"/auth/company/retail/save_by_opera/release",method:"post",data:n.a.stringify(e)})).then(function(e){t.$message.success("提交成功，请等待审核，可以关闭页面。"),t.saveBtnName="注册成功，可以关闭页面"}).catch(function(e){t.save_checked=!1,t.saveBtnLoading=!1})},saveOperatorCheck:function(){var e=this;this.$refs.addOperatorForm.validate(function(t){if(!t)return e.checkOK=!1,e.save_checked=!1,e.$message.error("还有未填写的内容"),!1;e.checkOK=!0})},clearForm:function(){this.$refs.addOperatorForm.resetFields()},getProv:function(e){this.provIndex=this.dataProv[0].prov.indexOf(e),this.dataCity=this.dataProv[this.provIndex+1]["0_"+this.provIndex],this.dialogForm.selectCity=this.dataCity[0],this.cityDetail=this.dataProv[this.provIndex+1].class1,this.dataCountry=this.cityDetail[0].class2,this.dialogForm.selectCountry=this.dataCountry[0],this.addOperatorForm.city=""},getCity:function(e){this.cityIndex=this.dataCity.indexOf(e),this.dataCountry=this.cityDetail[this.cityIndex].class2,this.dialogForm.selectCountry=this.dataCountry[0]},handleResize:function(e){this.fullWidth=document.documentElement.clientWidth,this.fullWidth<500?this.labelPosition="top":this.labelPosition="right"}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-container"},[a("el-container",[a("el-alert",{attrs:{center:"",title:"您正在注册成为代理商",type:"info"}}),e._v(" "),a("el-header",{staticStyle:{height:"auto"}},[a("h1",{staticClass:"reg-title"},[a("span",{staticClass:"opa-name"},[e._v(e._s(e.mname))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"opa-tips"},[e._v("邀请您成为代理商")])])]),e._v(" "),a("el-main",[a("div",{staticClass:"reg-main-form"},[a("el-form",{ref:"addOperatorForm",attrs:{model:e.addOperatorForm,size:"small",rules:e.operatorFormRules,"label-width":"100px","label-suffix":"：","label-position":e.labelPosition,disabled:e.checkOK}},[a("el-form-item",{attrs:{label:"公司/个人",prop:"name"}},[a("el-input",{staticClass:"form-input",model:{value:e.addOperatorForm.name,callback:function(t){e.$set(e.addOperatorForm,"name","string"==typeof t?t.trim():t)},expression:"addOperatorForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contact"}},[a("el-input",{staticClass:"form-input",model:{value:e.addOperatorForm.contact,callback:function(t){e.$set(e.addOperatorForm,"contact","string"==typeof t?t.trim():t)},expression:"addOperatorForm.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{staticClass:"form-input",model:{value:e.addOperatorForm.phone,callback:function(t){e.$set(e.addOperatorForm,"phone","string"==typeof t?t.trim():t)},expression:"addOperatorForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择省份",size:"small"},on:{change:function(t){return e.getProv(t)}},model:{value:e.addOperatorForm.province,callback:function(t){e.$set(e.addOperatorForm,"province",t)},expression:"addOperatorForm.province"}},e._l(e.dataProv[0].prov,function(e,t){return a("el-option",{key:t,attrs:{value:e,label:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择城市",size:"small"},on:{click:function(t){return e.getCity(t)}},model:{value:e.addOperatorForm.city,callback:function(t){e.$set(e.addOperatorForm,"city",t)},expression:"addOperatorForm.city"}},e._l(e.dataCity,function(e,t){return a("el-option",{key:t,attrs:{value:e,label:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{staticClass:"form-input",model:{value:e.addOperatorForm.address,callback:function(t){e.$set(e.addOperatorForm,"address","string"==typeof t?t.trim():t)},expression:"addOperatorForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理级别",prop:"agentLevel"}},[a("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择代理级别"},model:{value:e.addOperatorForm.agentLevel,callback:function(t){e.$set(e.addOperatorForm,"agentLevel",t)},expression:"addOperatorForm.agentLevel"}},e._l(e.levelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"save-btn"},[a("div",{staticStyle:{padding:"10px 0"}},[a("el-checkbox",{on:{change:e.saveOperatorCheck},model:{value:e.save_checked,callback:function(t){e.save_checked=t},expression:"save_checked"}},[e._v("确认填写无误")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion",loading:e.saveBtnLoading},on:{click:e.saveOperatorBefore}},[e._v(e._s(e.saveBtnName)+"\n          ")])],1)],1)])],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,d,!1,function(e){a("DwX8")},"data-v-58ff34e6",null);t.default=c.exports}});
//# sourceMappingURL=11.07b9efd366280d026f07.js.map